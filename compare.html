<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compare Matrix Algorithms</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #chart {
            margin-top: 2rem;
            background-color: rgba(255, 255, 255, 0.03);
            border: 1px solid #333;
            border-radius: 12px;
            padding: 1rem;
        }
    </style>
</head>
<body>
    <div class="overlay fade-in">
        <h1>Algorithm Comparison</h1>
        <p>Compare execution times of different matrix multiplication algorithms.</p>

        <form action="/cgi-bin/compare.cgi" method="POST" target="result-frame" style="text-align: center;">
            <input type="number"
                   name="size"
                   id="size"
                   class="styled-input"
                   placeholder="Matrix size (power of 2)"
                   min="1"
                   required />
            <br />
            <input type="submit" value="Run Comparison" class="action-button" />
        </form>

        <iframe name="result-frame" id="result-frame" onload="updateChart()"
                style="width: 100%; height: 300px; background-color: #111; border: 1px solid #333; border-radius: 8px; margin-top: 1.5rem;"></iframe>

        <canvas id="chart"></canvas>

        <a href="matrix.html" class="action-button" style="margin-top: 2rem;">← Back</a>
    </div>

    <script>
        function updateChart() {
            const iframe = document.getElementById("result-frame");
            const doc = iframe.contentDocument || iframe.contentWindow.document;
            const chartData = doc.getElementById("chart-data");
            if (!chartData) return;

            const labels = ["Standard", "Strassen", "Winograd"];
            const data = [
                parseFloat(chartData.dataset.standard),
                parseFloat(chartData.dataset.strassen),
                parseFloat(chartData.dataset.winograd)
            ];

            const size = chartData.dataset.size;

            const ctx = document.getElementById("chart").getContext("2d");
            if (window.runtimeChart) window.runtimeChart.destroy();

            window.runtimeChart = new Chart(ctx, {
                type: "bar",
                data: {
                    labels: labels,
                    datasets: [{
                        label: `Execution Time (s) for ${size}×${size}`,
                        data: data,
                        backgroundColor: ["#29b6f6", "#66bb6a", "#ffa726"],
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: "#cfdfff"
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: "#cfdfff" }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: "Time (s)",
                                color: "#cfdfff"
                            },
                            ticks: { color: "#cfdfff" },
                            grid: {
                                color: "rgba(255, 255, 255, 0.05)"
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
